name: Veracode DevSecOps 

on:
  workflow_call:
  
    inputs:
      # Variaveis que os projetos podem sobrescrever
      environment:
        description: 'Ambiente de execuÃ§Ã£o do build'
        required: true
        type: string
      project:
        description: 'Nome do projeto'
        required: true
        type: string
        
env:
  PROJECT: ${{ inputs.project_veracode }}
  ENVIRONMENT: ${{ inputs.environment }}

jobs:
  # â”€â”€â”€ Job de Checkout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  checkout:
    name: ğŸ“¥ Checkout do CÃ³digo
    runs-on: ubuntu-24.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4

  # â”€â”€â”€ Job que chama o template Veracode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  veracode:
    name: ğŸ›¡ï¸ Executar Veracode SCA/SAST/PipeScan
    needs: checkout
    uses: LaisLora/github-actions-templates/.github/workflows/template_py_simpli.yml@main
    secrets: inherit
    with:
      build-id: ${{ inputs.build-id }}
      environment: ${{ inputs.environment }}
      project_veracode: ${{ inputs.project }}

      
